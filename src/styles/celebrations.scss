// 8-Bit Celebration Effects Styles
// Animations and effects for gamification celebrations

.celebration-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: $z-notification + 100;
  
  > * {
    pointer-events: auto;
  }
}

// XP Gain Popup
.xp-gain-popup {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  animation: xpFloat 3s ease-out forwards;
  
  .xp-amount {
    font-family: $font-family-primary;
    font-size: $font-size-lg;
    color: $color-xp-bar;
    text-shadow: 
      2px 2px 0 $color-pixel-border-dark,
      -1px -1px 0 rgba(255, 255, 255, 0.5);
    margin-bottom: $space-xs;
  }
  
  .xp-action {
    font-family: $font-family-primary;
    font-size: $font-size-xs;
    color: $color-text-secondary;
    text-shadow: 1px 1px 0 $color-pixel-border-dark;
  }
}

@keyframes xpFloat {
  0% {
    transform: translateY(0) scale(0.5);
    opacity: 0;
  }
  20% {
    transform: translateY(-20px) scale(1.2);
    opacity: 1;
  }
  100% {
    transform: translateY(-100px) scale(1);
    opacity: 0;
  }
}

// Level Up Overlay
.level-up-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease-out;
  
  &.fade-out {
    animation: fadeOut 0.5s ease-out forwards;
  }
}

.level-up-content {
  text-align: center;
  position: relative;
  
  .level-up-animation {
    position: relative;
    padding: $space-xl * 2;
  }
  
  .pixel-text-large {
    font-family: $font-family-primary;
    font-size: $font-size-xl * 2;
    color: $color-level-gold;
    text-shadow: 
      4px 4px 0 $color-pixel-border-dark,
      -2px -2px 0 rgba(255, 255, 255, 0.5);
    margin: 0;
    animation: levelUpPulse 1s ease-in-out infinite;
  }
  
  .level-number {
    font-family: $font-family-primary;
    font-size: $font-size-xl;
    color: $color-text-primary;
    margin: $space-md 0;
    text-shadow: 2px 2px 0 $color-pixel-border-dark;
  }
  
  .level-title {
    font-family: $font-family-primary;
    font-size: $font-size-lg;
    color: $color-primary;
    text-shadow: 2px 2px 0 $color-pixel-border-dark;
    margin-bottom: $space-xl;
  }
  
  .continue-btn {
    margin-top: $space-xl;
  }
}

@keyframes levelUpPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

// Pixel Stars
.pixel-stars {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.pixel-star {
  position: absolute;
  width: 4px;
  height: 4px;
  background-color: $color-level-gold;
  box-shadow: 
    0 0 4px $color-level-gold,
    0 0 8px $color-level-gold;
  animation: starTwinkle 2s ease-in-out infinite;
}

@keyframes starTwinkle {
  0%, 100% {
    opacity: 0;
    transform: scale(0.5);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

// Pixel Fireworks
.pixel-fireworks {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.pixel-firework {
  position: absolute;
  width: 4px;
  height: 4px;
  animation: fireworkLaunch 1s ease-out forwards;
}

@keyframes fireworkLaunch {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-300px);
  }
}

.firework-particle {
  position: absolute;
  width: 4px;
  height: 4px;
  animation: fireworkExplode 1s ease-out forwards;
}

@keyframes fireworkExplode {
  0% {
    transform: translate(0, 0);
    opacity: 1;
  }
  100% {
    transform: translate(var(--end-x), var(--end-y));
    opacity: 0;
  }
}

// Achievement Notification
.achievement-notification {
  position: absolute;
  top: 20%;
  right: $space-md;
  background-color: $color-bg-medium;
  border: 3px solid $color-achievement-gold;
  box-shadow: 
    4px 4px 0 $color-pixel-border-dark,
    0 0 20px rgba($color-achievement-gold, 0.5);
  padding: $space-md;
  display: flex;
  align-items: center;
  gap: $space-md;
  max-width: 400px;
  
  .achievement-icon {
    font-size: $font-size-xl * 2;
    flex-shrink: 0;
  }
  
  .achievement-details {
    flex: 1;
  }
  
  .achievement-header {
    font-family: $font-family-primary;
    font-size: $font-size-xs;
    color: $color-achievement-gold;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: $space-xs;
  }
  
  .achievement-name {
    font-family: $font-family-primary;
    font-size: $font-size-md;
    color: $color-text-primary;
    margin-bottom: $space-xs;
  }
  
  .achievement-description {
    font-family: $font-family-primary;
    font-size: $font-size-xs;
    color: $color-text-secondary;
    margin-bottom: $space-sm;
  }
  
  .achievement-reward {
    font-family: $font-family-primary;
    font-size: $font-size-sm;
    color: $color-xp-bar;
  }
}

// Quest Complete Notification
.quest-complete-notification {
  position: absolute;
  background-color: $color-bg-medium;
  border: 3px solid $color-success;
  box-shadow: 
    4px 4px 0 $color-pixel-border-dark,
    0 0 15px rgba($color-success, 0.5);
  padding: $space-md $space-lg;
  text-align: center;
  
  .quest-complete-header {
    font-family: $font-family-primary;
    font-size: $font-size-sm;
    color: $color-success;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: $space-sm;
  }
  
  .quest-name {
    font-family: $font-family-primary;
    font-size: $font-size-md;
    color: $color-text-primary;
    margin-bottom: $space-sm;
  }
  
  .quest-reward {
    font-family: $font-family-primary;
    font-size: $font-size-md;
    color: $color-xp-bar;
    margin-bottom: $space-sm;
  }
  
  .pixel-check {
    font-size: $font-size-xl;
    color: $color-success;
    animation: checkBounce 0.5s ease-out;
  }
}

@keyframes checkBounce {
  0% {
    transform: scale(0);
  }
  50% {
    transform: scale(1.3);
  }
  100% {
    transform: scale(1);
  }
}

// Sparkle Effect
.sparkle {
  position: absolute;
  width: 4px;
  height: 4px;
  background-color: $color-level-gold;
  animation: sparkleAnim 1s ease-out forwards;
}

@keyframes sparkleAnim {
  0% {
    transform: scale(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: scale(1.5) rotate(180deg);
    opacity: 0;
  }
}

// Animation Classes
.slide-in-right {
  animation: slideInRight 0.5s ease-out;
}

.slide-out-right {
  animation: slideOutRight 0.5s ease-out forwards;
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

.bounce-in {
  animation: bounceIn 0.5s ease-out;
}

@keyframes bounceIn {
  0% {
    transform: translateX(-50%) scale(0.3);
    opacity: 0;
  }
  50% {
    transform: translateX(-50%) scale(1.05);
  }
  70% {
    transform: translateX(-50%) scale(0.9);
  }
  100% {
    transform: translateX(-50%) scale(1);
    opacity: 1;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.fade-out {
  animation: fadeOut 0.5s ease-out forwards;
}